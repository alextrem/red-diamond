env:
    global:
    - secure: "HBDFysj90FNmAdrziR1whg"

language: c

before_install:
    - sudo pip install codecov
    - sudo add-apt-repository -y ppa:terry.guo/gcc-arm-embedded
    - sudo apt-get update -o Dir::Etc::sourcelist="sources.list.d/terry_guo-gcc-arm-embedded-precise.list" -o Dir::Etc::sourceparts="-" -o APT::Get::List-Cleanup="0"
    - sudo apt-get install libcurl4-openssl-dev libelf-dev libdw-dev p7zip-full

install:
    - wget https://launchpad.net/gcc-arm-embedded/5.0/5-2016-q2-update/+download/gcc-arm-none-eabi-5_4-2016q2-20160622-linux.tar.bz2
    - tar -xf gcc-arm-none-eabi-5_4-2016q2-20160622-linux.tar.bz2

before_script:
    - export PATH=$PATH:$PWD/gcc-arm-none-eabi-5_4-2016q2-20160622/bin

script:
    - make extract
    - cd dsp_lib; make all; cd ..
    - make all BUILD_NUMBER=$TRAVIS_BUILD_NUMBER

after_success:
    - bash <(curl -s https://codecov.io/bash)
